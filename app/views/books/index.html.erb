<h1>Books</h1>


<% if current_user %>
    <strong>Logged in as:</strong> 
    <%= current_user.email %>
    <div class="btn-group" role="group" aria-label="Basic example">
    <%= button_to 'Sign out', destroy_user_session_path, method: :delete, class:"btn btn-warning btn-sm" %>
    <div class="btn btn-warning btn-sm">
    <a button_to href="/user">Profile</a>    
    </div><br>
    </div>
<% else %>

<div class="btn-group" role="group" aria-label="Basic example">
<%= button_to 'Sign up', new_user_registration_path, class:"btn btn-warning btn-sm" %>
    </div>
    <div class="btn btn-warning btn-sm">
    <%= button_to 'Sign in', new_user_session_path, class:"btn btn-warning btn-sm" %>
    </div>
<% end %>

<% if current_user && current_user.admin %>
<br>
<div class="btn-group" role="group" aria-label="Basic example">
  <%= link_to 'New Book', new_book_path, class:"btn btn-warning btn-sm" %>
  <%= link_to 'Library Log', log_book_path, class:"btn btn-warning btn-sm" %>
  </div>
<% end %>


<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Copies</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book.title %></td>
        <td><%= book.copies %></td>
        <td><%= link_to 'View', show_book_path(book) %></td>    
        <% if current_user && current_user.admin %>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
    <% end %>

  </tbody>
</table>